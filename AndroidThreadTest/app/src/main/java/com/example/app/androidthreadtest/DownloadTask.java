package com.example.app.androidthreadtest;import android.app.ProgressDialog;import android.content.Context;import android.content.Intent;import android.os.AsyncTask;import android.widget.Toast;/** * Created by shaomiao on 2016-12-11. * 如果想要启动这个任务，只需编写以下代码即可： * new DownloadTask().execute(); */public class DownloadTask extends AsyncTask<Void, Integer, Boolean> {    ProgressDialog progressDialog = null;    @Override    protected void onPreExecute() {        progressDialog.show(); // 显示进度对话框    }    @Override    protected Boolean doInBackground(Void... voids) {        try {            while (true) {//                int downloadRercent = doDownload(); // 这是一个虚构的方法//                publishProgress(downloadRercent);//                if (downloadRercent >= 100) {//                    break;//                }            }        } catch (Exception e) {            return false;        }    // return true;    }    @Override    protected void onProgressUpdate(Integer... values) {        // 在这里更新下载进度        progressDialog.setMessage("Downloaded " + values[0] + "%");    }    @Override    protected void onPostExecute(Boolean result) {        progressDialog.dismiss(); // 关闭进度对话框        // 在这里提示下载结果        if (result) {            // 成功        } else {            // 失败        }    }}